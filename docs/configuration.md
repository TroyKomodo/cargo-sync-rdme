# Configuration

See [Configuration](https://gifnksm.github.io/cargo-sync-rdme/cargo_sync_rdme/config/index.html) for details.

You can customize the behavior of cargo-sync-rdme by adding the following section to `Cargo.toml`.

```toml
[package.metadata.cargo-sync-rdme.badge.badges]
maintenance = true
license = true

[package.metadata.cargo-sync-rdme.rustdoc]
html-root-url = "https://gifnksm.github.io/cargo-sync-rdme/"
```

## Badge configuration

You can customize the badges generated by cargo-sync-rdme by adding the following section to `Cargo.toml`:

```toml
[package.metadata.cargo-sync-rdme.badge.badges]
maintenance = true
license = true
```

Badges are output in the order in which the configuration items are written.

Output README file is as follows:

```markdown
<!-- cargo-sync-rdme badge [[ -->
[![Maintenance: actively-developed](https://img.shields.io/badge/maintenance-actively--developed-brightgreen.svg)](https://doc.rust-lang.org/cargo/reference/manifest.html#the-badges-section)
[![License: MIT OR Apache-2.0](https://img.shields.io/crates/l/cargo-sync-rdme.svg)](#license)
<!-- cargo-sync-rdme ]] -->
```

### Badge configuration items

The following configuration items are available for badges:

* **Maintenance status**

    [![Maintenance: actively-developed](https://img.shields.io/badge/maintenance-actively--developed-brightgreen.svg)](https://doc.rust-lang.org/cargo/reference/manifest.html#the-badges-section)

    A badge indicating the maintenance status of the package.

    The badge is generated from the `package.metadata.maintenance.status` field in `Cargo.toml`
    (see [the cargo documentation](https://doc.rust-lang.org/cargo/reference/manifest.html#the-badges-section) for details).

    The link target of the badge is set to <https://doc.rust-lang.org/cargo/reference/manifest.html#the-badges-section>.

    Available values:

  * `maintenance = true` : Output a maintenance status badge
  * `maintenance = false` : Do not output a maintenance status badge

* **License**

    [![License: MIT OR Apache-2.0](https://img.shields.io/crates/l/cargo-sync-rdme.svg)](../README.md#license)

    A badge indicating the license of the package.

    The badge is generated from the `package.license` field or `package.license-file` field in `Cargo.toml`
    (see [the cargo documentation](https://doc.rust-lang.org/cargo/reference/manifest.html#the-license-and-license-file-fields) for details).

    The link target of the badge is determined by the badge configuration.

    Available values:

  * `license = { link = "<link>" }` : Output a license badge. The link target of the badge is set to `<link>`
  * `license = true` : Output a license badge
    * If `package.license-file` is specified, the link target of the badge is set to the license file
    * If `package.license` is specified, no link is set
  * `license = false` : Do not output a license badge

* **crates.io**

    [![crates.io](https://img.shields.io/crates/v/cargo-sync-rdme.svg?logo=rust)](https://crates.io/crates/cargo-sync-rdme)

    A badge indicating the version of the package on crates.io.

    The badge is generated from the `package.name` field in `Cargo.toml`
    (see [the cargo documentation](https://doc.rust-lang.org/cargo/reference/manifest.html#the-name-field) for details).

    The link target of the badge is set to `https://crates.io/crates/<package name>)`.

    Available values:

  * `crates-io = true` : Output a crates.io badge
  * `crates-io = false` : Do not output a crates.io badge

* **Docs.rs**

    [![docs.rs](https://docs.rs/cargo-sync-rdme/badge.svg)](https://docs.rs/cargo-sync-rdme)

    A badge indicating the documentation build status of the package on docs.rs.

    The badge is generated from the `package.name` field in `Cargo.toml`
    (see [the cargo documentation](https://doc.rust-lang.org/cargo/reference/manifest.html#the-name-field) for details).

    The link target of the badge is set to `https://docs.rs/<package name>)`.

    Available values:

  * `docs-rs = true` : Output a docs.rs badge
  * `docs-rs = false` : Do not output a docs.rs badge

* **Rust Version (MSRV)**

    [![Rust: ^1.62.1](https://img.shields.io/badge/rust-^1.62.1-93450a.svg?logo=rust)](https://doc.rust-lang.org/cargo/reference/manifest.html#the-rust-version-field)

    A badge indicating the minimum supported Rust version (MSRV) of the package.

    The badge is generated from the `package.metadata.rust-version` field in `Cargo.toml`
    (see [the cargo documentation](https://doc.rust-lang.org/cargo/reference/manifest.html#the-rust-version-field) for details).

    The link target of the badge is set to <https://doc.rust-lang.org/cargo/reference/manifest.html#the-rust-version-field>.

    Available values:

  * `rust-version = true` : Output a supported rust version badge
  * `rust-version = false` : Do not output a supported rust version badge

* **GitHub Actions**

    [![GitHub Actions: CI](https://github.com/gifnksm/cargo-sync-rdme/actions/workflows/ci.yml/badge.svg)](https://github.com/gifnksm/cargo-sync-rdme/actions/workflows/ci.yml)

    A badge indicating the status of the GitHub Actions workflow.

    The badge is generated from the `package.repository` field in `Cargo.toml`
    (see [the cargo documentation](https://doc.rust-lang.org/cargo/reference/manifest.html#the-repository-field) for details).

    The link target of the badge is set to `<package.repository>/actions/workflows/<file>`.
    `<file>` is the name of the file in the `.github/workflows` directory.

    Available values:

  * `github-actions = { workflows = [ { file = "<file>", name = "<name>" }, ..] }` :
     Output a GitHub Actions status badges.

     The link target of the badge is set to `<package.repository>/actions/workflows/<file>`.

     `<name>` is used as the badge name.
     If `<name>` is not specified, the name of the workflow defined in the `<file>` is used as the badge name.
  * `github-actions = { workflows = [ "<file>" ] }` :
     Same as `github-actions = { workflows = [ { file = "<file>" } ] }`
  * `github-actions = { workflows = "<file>" }` :
     Same as `github-actions = { workflows = [ { file = "<file>" } ] }`
  * `github-actions = { workflows = [] }` :
     Output a GitHub Actions status badge for all workflows in the `.github/workflows` directory.
  * `github-actions = true` : Same as `github-actions = { workflows = [] }`
  * `github-actions = false` : Do not output a GitHub Actions status badge

* **Codecov**

    [![Codecov](https://codecov.io/gh/gifnksm/cargo-sync-rdme/graph/badge.svg)](https://codecov.io/gh/gifnksm/cargo-sync-rdme)

    A badge indicating the coverage of the package.

    The badge is generated from the `package.repository` field in `Cargo.toml`
    (see [the cargo documentation](https://doc.rust-lang.org/cargo/reference/manifest.html#the-repository-field) for details).

    The link target of the badge is set to `https://codecov.io/gh/<repository_path>/`.

    Available values:

  * `codecov = true` : Output a Codecov badge
  * `codecov = false` : Do not output a Codecov badge

<!-- * **Custom badges**

    If you want to use a badge that is not supported by cargo-sync-rdme, you can use the `custom` configuration item.

    ```toml
    [package.metadata.sync-rdme.badge.badges]
    custom = { name = "<badge name>", link = "<link>", image = "<image>" }
    ```

    You can use template variables in `<badge name>`, `<link>`, and `<image>`.
    Available template variables are following:

  * `{{package_name}}` : The value of `package.name` in `Cargo.toml`
  * `{{crate_name}}` : The value of `package.name` with `-` replaced with `_` in `Cargo.toml`
  * `{{version}}` : The value of `package.version` in `Cargo.toml`
  * `{{repository}}` : The value of `package.repository` in `Cargo.toml`
  * `{{rust-version}}` : The value of `package.rust-version` in `Cargo.toml` -->

### Multiple badge items with the same kind

If you want to use the same kind of badge multiple times, add the `-*` suffix to the configuration item name.

```toml
[package.metadata.sync-rdme.badge.badges]
github-actions-foo = { workflows = "foo.yml" }
github-actions-bar = { workflows = "bar.yml" }
```

### Badge groups

You can define multiple badge groups and select the badge groups to be output using the `package.metadata.sync-rdme.badge.badges-<group-name>` section.

```toml
[package.metadata.sync-rdme.badge.badges-foo]
# foo group definition
license = true
maintenance = true

[package.metadata.sync-rdme.badge.badges-bar]
# bar group definition
crates-io = true
docs-rs = true
```

You can embed the badge groups in the `README.md` using the following syntax:

```markdown
Before sync:
<!-- cargo-sync-rdme badge:<group-name> -->

After sync:
<!-- cargo-sync-rdme badge:<group-name> [[ -->
badges...
<!-- cargo-sync-rdme ]] -->
```

## Rustdoc configuration

You can customize the crate documentation generated by cargo-sync-rdme by adding the following section to `Cargo.toml`:

```toml
[package.metadata.cargo-sync-rdme.rustdoc]
html-root-url = "<url>"
```

The following configuration items are available for rustdoc:

* `html-root-url` : Set the root URL of the documentation for the packages in the workspace.
   The default value is `https://docs.rs/<package name>/<package version>`.

   If you host the documentation of main/master branch on GitHub Pages, you can set the value to `https://<user>.github.io/<repository>/`.
